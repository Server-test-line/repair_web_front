<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>飛騰家電 - 報修進度查詢 (純前端版)</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="staff_style.css">
  <link rel="stylesheet" href="record_detail.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* (新增) 模擬檔案預覽的樣式 */
    .mock-preview-placeholder {
      padding: 20px;
      border: 1px dashed #cba96d;
      background: #014027;
      border-radius: 4px;
      text-align: center;
      color: #f3d28c;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="nav-left">
      <img src="logo1.png" alt="飛騰家電logo" class="logo" />
      <span class="username">歡迎，會員名字</span>
    </div>
    <div class="nav-right">
      <a href="home.html" class="nav-link">首頁</a>
      <a href="repair_pending.html" class="nav-link">報修</a>
      <a href="repair_checking.html" class="nav-link">報修進度查詢</a>
      <a href="repair_done.html" class="nav-link">維修歷史紀錄</a>
      <a href="history.html" class="nav-link">購買紀錄</a>
      <a href="info.html" class="nav-link">會員資料</a>
      <a href="#" class="nav-link" onclick="logout()">登出</a>
    </div>
    <div class="mobile-menu">
        <button id="menu-toggle">☰</button>
        <div id="overlay1" class="menu-overlay">
            <div id="mobile-dropdown" class="mobile-dropdown">
                <a href="home.html">首頁</a>
                <a href="repair_pending.html">報修</a>
                <a href="repair_checking.html">報修進度查詢</a>
                <a href="repair_done.html">維修歷史紀錄</a>
                <a href="history.html">購買歷史</a>
                <a href="info.html">會員資料</a>
                <a href="#" onclick="logout()">登出</a>
            </div>
        </div>
    </div>
  </div>

  <div class="page-title">報修進度查詢</div>
  <div class="record-grid" id="recordGrid"></div>

  <div class="detail-overlay" id="overlay"></div>
  <div class="detail-modal" id="detailModal">
    <button class="close-icon" id="close-detail">✖</button>
    <h3>詳細報修內容</h3>
    <div id="detailContent"></div>
  </div>
  
  <a href="home.html" class="back-button">← 回首頁</a>
  
  <script>
      // 狀態對照 (來自 1.html)
      const statusMap = {
        "1": "已完成報修",
        "2": "已安排物流收貨",
        "3": "檢測中",
        "4": "報價",
        "5": "議價",
        "6": "購買新品",
        "7": "報廢",
        "8": "維修中",
        "9": "產品送回",
        "10": "送貨",
        "11": "結案"
      };

      // (*** 新增 ***) 模擬後端 API 回傳的假資料
      function getMockRepairHistory() {
        return [
          {
            Repair_No: 'FT20250820004',
            Name: '張小芬',
            Product_Name: '微波爐',
            Product_SN: 'FT004',
            Repair_Date: '2025-08-20',
            Repair_Status: '5', // 議價
            Fault_Description: '按下開始鍵沒有反應',
            Telphone: '0965432187',
            Place_Name: '高雄店',
            Product_Price: '1800',
            Order_Date: '2024-09-10',
            Repair_Method: '電話報修',
            Repair_Type: '宅配',
            Adress: '高雄市XX區XX路XX號',
            Contact_Details: '客戶來電說按下開始鍵沒有反應',
            Receive_Date: '2025-08-21',
            Test_Date: '2025-08-22',
            Agree_Date: '2025-08-23 10:30',
            Arrival_Date: '2025-08-24',
            Inspection_Desc: 'TEST_FILE_ID_123', // 檢測內容檔案ID
            Maintenance_Desc: '', // 維修內容檔案ID
            Parts_Desc: 'PART_FILE_ID_456', // 零件明細檔案ID
            Invoice_Desc: 'INVOICE_FILE_ID_789', // 發票檔案ID
            Fees_Desc: 'QUOTE_FILE_ID_101', // 報價單檔案ID
            Receive_Fee: '150',
            Test_Fee: '300',
            Repair_Fee: '800',
            Clean_Fee: '0',
            Parts_Fee: '1200',
            Onside_Fee: '0',
            Total_Fee: '2450', // 稅後
            Tax_Fee: '117', // 稅
            Discount: '0',
            Total_Amount: '2450' // 實收
          },
          {
            Repair_No: 'FT20250815003',
            Name: '李大華',
            Product_Name: '烤箱',
            Product_SN: 'FT003',
            Repair_Date: '2025-08-15',
            Repair_Status: '8', // 維修中
            Fault_Description: '溫度控制異常',
            Telphone: '0987654321',
            Place_Name: '台中店',
            Product_Price: '4500',
            Order_Date: '2024-10-20',
            Repair_Method: '線上報修',
            Repair_Type: '門市送件',
            Adress: '台中市XX區XX路XX號',
            Contact_Details: '客戶反映烤箱溫度不準確',
            Receive_Date: '2025-08-16',
            Test_Date: '2025-08-17',
            Agree_Date: '',
            Arrival_Date: '',
            Inspection_Desc: 'TEST_FILE_ID_ABC',
            Maintenance_Desc: 'MAINT_FILE_ID_DEF',
            Parts_Desc: '',
            Invoice_Desc: '',
            Fees_Desc: '',
            Receive_Fee: '0',
            Test_Fee: '300',
            Repair_Fee: '1000',
            Clean_Fee: '100',
            Parts_Fee: '1500',
            Onside_Fee: '0',
            Total_Fee: '2900',
            Tax_Fee: '138',
            Discount: '0',
            Total_Amount: '2900'
          },
          {
            Repair_No: 'FT20250803006',
            Name: '林小華',
            Product_Name: '洗衣機',
            Product_SN: 'FT006',
            Repair_Date: '2025-08-03',
            Repair_Status: '11', // 結案
            Fault_Description: '排水異常',
            Telphone: '0934567890',
            Place_Name: '台南店',
            Product_Price: '15000',
            Order_Date: '2024-10-15',
            Repair_Method: 'LINE聯絡',
            Repair_Type: '宅配',
            Adress: '台南市XX區XX路XX號',
            Contact_Details: '已完成維修並送回客戶，案件結案',
            Receive_Date: '2025-08-04',
            Test_Date: '2025-08-05',
            Agree_Date: '2025-08-06 14:00',
            Arrival_Date: '2025-08-08',
            Inspection_Desc: '',
            Maintenance_Desc: '',
            Parts_Desc: 'PART_FILE_ID_777',
            Invoice_Desc: 'INVOICE_FILE_ID_888',
            Fees_Desc: 'QUOTE_FILE_ID_999',
            Receive_Fee: '300',
            Test_Fee: '500',
            Repair_Fee: '1500',
            Clean_Fee: '0',
            Parts_Fee: '800',
            Onside_Fee: '0',
            Total_Fee: '3100',
            Tax_Fee: '148',
            Discount: '0',
            Total_Amount: '3100'
          }
        ];
      }
    
      // (*** 替換 ***) 移除 API 呼叫，改用本地 Mock 資料
      window.onload = function () {
          const phone = localStorage.getItem('userName');
          if (!phone) {
              // 模擬登入，方便測試
              console.log("未登入，模擬登入 'demo_user'");
              localStorage.setItem('userName', 'demo_user');
              // alert('請先登入');
              // window.location.href = 'index.html';
              // return;
          }
      
          const container = document.querySelector('#recordGrid');
          container.innerHTML = '<p>載入中，請稍候...</p>';
      
          try {
              // (替換) 呼叫本地 MOCK 函數，不再 fetch
              const result = getMockRepairHistory();
              console.log('Mock 資料：', result);
      
              // 5. 處理資料
              if (Array.isArray(result) && result.length > 0) {
                  container.innerHTML = '';
                  // (修改) 移除 .reverse()，讓資料照假資料的順序
                  result.forEach((repairhistory, index) => {
                      const repairBox = document.createElement('div');
                      repairBox.className = 'info-box';
                      repairBox.innerHTML = `
                      <p>報修單號：${repairhistory.Repair_No || ''}</p>
                      <p>客戶姓名：${repairhistory.Name || ''}</p>
                      <p>報修產品名稱：${repairhistory.Product_Name || ''}</p>
                      <p>報修產品序號：${repairhistory.Product_SN || ''}</p>
                      <p>報修日期：${repairhistory.Repair_Date || ''}</p>
                      <p>報修狀態：${statusMap[repairhistory.Repair_Status] || repairhistory.Repair_Status || repairhistory.status}</p>
                      <p>故障描述：${repairhistory.Fault_Description || ''}</p>
                      ${generateStatusProgress(repairhistory.Repair_Status)}
                      <button class="show-detail" data-index="${index}">查看所有內容</button>
                      <hr>
                      `;
                      container.appendChild(repairBox);
                  });
                
                  bindDetailButtons(result);
                
              } else {
                  document.querySelector('#recordGrid').innerHTML = '<p>查無報修資料</p>';
              }
          } catch (error) {
              console.error('查詢失敗:', error);
              document.querySelector('#recordGrid').innerHTML = '<p>發生錯誤，請稍後再試</p>';
          }
      }

    const modal = document.getElementById('detailModal');
    const overlay = document.getElementById('overlay');
    const closeBtn = document.getElementById('close-detail');
    
    closeBtn.addEventListener('click', () => {
      overlay.classList.remove('active');
      modal.classList.remove('active');
    });
    overlay.addEventListener('click', () => {
      overlay.classList.remove('active');
      modal.classList.remove('active');
    });

    /* === Modal (來自 1.html 的 5 分頁版本) === */
    function bindDetailButtons(list) {
      const overlay = document.getElementById('overlay');
      const modal = document.getElementById('detailModal');
      const closeBtn = document.getElementById('close-detail');
      const detailBtns = document.querySelectorAll('.show-detail');
      const detailContent = document.getElementById('detailContent');

      detailBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const i = +btn.getAttribute('data-index');
          const data = list[i];

          let invoiceParts = ["", "", "", ""];
          if (data.Invoice_Desc) {
            invoiceParts = data.Invoice_Desc.split("-");
          }
          
          detailContent.innerHTML = `
            <div class="detail-tabs" style="display: flex; justify-content: space-between; width: 100%; max-width: 420px; margin: 0 auto 20px; border-bottom: 1px solid #ebd7b5;">
              <button class="detail-tab-button active" id="repair-content-tab" style="flex: 1; padding: 10px 0; font-size: 16px; background-color: transparent; color: #f3d28c; border: none; border-bottom: 2px solid #cba96d; cursor: pointer; transition: border-bottom 0.3s ease, color 0.3s ease;">報修內容</button>
              <button class="detail-tab-button inactive" id="inspection-content-tab" style="flex: 1; padding: 10px 0; font-size: 16px; background-color: transparent; color: #797777; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: border-bottom 0.3s ease, color 0.3s ease;">檢測內容</button>
              <button class="detail-tab-button inactive" id="maintenance-content-tab" style="flex: 1; padding: 10px 0; font-size: 16px; background-color: transparent; color: #797777; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: border-bottom 0.3s ease, color 0.3s ease;">維修內容</button>
              <button class="detail-tab-button inactive" id="quotation-process-tab" style="flex: 1; padding: 10px 0; font-size: 16px; background-color: transparent; color: #797777; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: border-bottom 0.3s ease, color 0.3s ease;">報價過程</button>
              <button class="detail-tab-button inactive" id="invoice-tab" style="flex: 1; padding: 10px 0; font-size: 16px; background-color: transparent; color: #797777; border: none; border-bottom: 2px solid transparent; cursor: pointer; transition: border-bottom 0.3s ease, color 0.3s ease;white-space: nowrap;">報價單與發票</button>
            </div>

            <div id="repair-content-section" class="detail-section">
              <p>報修單號：${data.Repair_No}</p>
              <p>報修狀態：${statusMap[data.Repair_Status] || data.Repair_Status || data.status}</p>
              <p>會員姓名：${data.Name || ''}</p>
              <p>電話號碼：${data.Telphone || ''}</p>
              <p>報修產品：${data.Product_Name || ''}</p>
              <p>產品序號：${data.Product_SN || ''}</p>
              <p>購買地點：${data.Place_Name}</p>
              <p>購買價格：${data.Product_Price}</p>
              <p>購買日期：${data.Order_Date}</p>
              <p>報修方式：${data.Repair_Method || ''}</p>
              <p>送修方式：${data.Repair_Type || ''}</p>
              <p>收件地址：${data.Adress || ''}</p>
              <p>故障描述：${data.Fault_Description || ''}</p>
              <p>報修連絡內容：${data.Contact_Details || ''}</p>
              <p>報修日期：${data.Repair_Date || ''}</p>
              <p>收貨日期：${data.Receive_Date || ''}</p>
              <p>檢測日期：${data.Test_Date || ''}</p>
              <p>同意議價時間：${data.Agree_Date || ''}</p>
              <p>貨物抵達日：${data.Arrival_Date || ''}</p>
            </div>

            <div id="inspection-content-section" class="edit-section" style="display: none;">
              <input type="hidden" class="fileIdInput" />
              <div class="fileResult"></div>
              <img class="previewImg" alt="預覽" style="display:none; max-width:400px; margin-top:10px;" />
              <div class="previewPdfContainer" style="display:none; margin-top:10px;"></div>
            </div>

            <div id="maintenance-content-section" class="edit-section" style="display: none;">
              <input type="hidden" class="fileIdInput" />
              <div class="fileResult"></div>
              <img class="previewImg" alt="預覽" style="display:none; max-width:400px; margin-top:10px;" />
              <div class="previewPdfContainer" style="display:none; margin-top:10px;"></div>
            </div>
            
            <div id="quotation-process-section" class="detail-section" style="display: none;">
              <p>運費報價：${data.Receive_Fee || ''}</p>
              <p>檢測費用：${data.Test_Fee || ''}</p>
              <p>維修工資：${data.Repair_Fee || ''}</p>
              <p>清潔費用：${data.Clean_Fee || ''}</p>
              <p>零件費用：${data.Parts_Fee || ''}</p>
              <p>到府服務費用：${data.Onside_Fee || ''}</p>
              <p>維修總金額（稅後）：${data.Total_Fee || ''}</p>
              <p>營業稅（5%）：${data.Tax_Fee || ''}</p>
              <p>折扣金額：${data.Discount || ''}</p>
              <p>實收優惠價：${data.Total_Amount || ''}</p>

              <hr style="margin: 15px 0;">
              <p style="font-weight: bold;">零件明細說明</p>
              
              <div id="parts-section" class="upload-section">
                <input type="hidden" class="fileIdInput" />
                <div class="fileResult"></div>
                <img class="previewImg" alt="預覽" style="display:none; max-width:400px; margin-top:10px;" />
                <div class="previewPdfContainer" style="display:none; margin-top:10px;"></div>
              </div>
            </div>

            <div id="invoice-section" class="upload-section" style="display: none;">
              <div id="invoiceFileSection" class="upload-section" style="margin-bottom: 20px;">
                <p style="margin-bottom: 5px;">發票明細：</p>
                <input type="hidden" class="fileIdInput" /> 
                <div class="fileResult"></div>
                <img class="previewImg" alt="預覽" style="display:none; max-width:400px; margin-top:10px;" />
                <div class="previewPdfContainer" style="display:none; margin-top:10px;"></div>
              </div>
              <div id="feesFileSection" class="upload-section">
                <p style="margin-bottom: 5px;">報價單：</p>
                <input type="hidden" class="fileIdInput" id="feesFileId" /> 
                <div class="fileResult"></div>
                <img class="previewImg" alt="預覽" style="display:none; max-width:400px; margin-top:10px;" />
                <div class="previewPdfContainer" style="display:none; margin-top:10px;"></div>
              </div>
            </div> 
          `;
          
          // 綁定切換功能
          bindDetailTabSwitching();
          // (修改) 呼叫模擬的檔案載入
          loadAllDetailFiles(data);
          overlay.classList.add('active');
          modal.classList.add('active');
        });
      });

      closeBtn.addEventListener('click', () => {
        overlay.classList.remove('active');
        modal.classList.remove('active');
      });
      overlay.addEventListener('click', () => {
        overlay.classList.remove('active');
        modal.classList.remove('active');
      });
    }

    /* === Modal 內部切換功能 === */
    function bindDetailTabSwitching() {
      const repairContentTab = document.getElementById("repair-content-tab");
      const inspectionContentTab = document.getElementById("inspection-content-tab");
      const maintenanceContentTab = document.getElementById("maintenance-content-tab");
      const quotationProcessTab = document.getElementById("quotation-process-tab");
      const invoiceTab = document.getElementById("invoice-tab");

      const repairContentSection = document.getElementById('repair-content-section');
      const inspectionContentSection = document.getElementById('inspection-content-section');
      const maintenanceContentSection = document.getElementById('maintenance-content-section');
      const quotationProcessSection = document.getElementById('quotation-process-section');
      const invoiceSection = document.getElementById('invoice-section');

      function switchDetailTab(tabName) {
        const tabs = {
          repair: repairContentTab,
          inspection: inspectionContentTab,
          maintenance: maintenanceContentTab,
          quotation: quotationProcessTab,
          invoice: invoiceTab
        };

        const sections = {
          repair: repairContentSection,
          inspection: inspectionContentSection,
          maintenance: maintenanceContentSection,
          quotation: quotationProcessSection,
          invoice: invoiceSection
        };

        // 重置所有標籤為 inactive 狀態
        Object.values(tabs).forEach(tab => {
          if (tab) {
            tab.className = "detail-tab-button inactive";
            tab.style.color = "#797777";
            tab.style.borderBottom = "2px solid transparent";
          }
        });

        // 隱藏所有區塊
        Object.values(sections).forEach(section => {
          if (section) {
            section.style.display = "none";
          }
        });

        // 激活選中的標籤和區塊
        if (tabs[tabName] && sections[tabName]) {
          tabs[tabName].className = "detail-tab-button active";
          tabs[tabName].style.color = "#f3d28c";
          tabs[tabName].style.borderBottom = "2px solid #cba96d";
          sections[tabName].style.display = "block";
        }
      }

      // 綁定點擊事件
      if (repairContentTab) repairContentTab.addEventListener('click', () => switchDetailTab('repair'));
      if (inspectionContentTab) inspectionContentTab.addEventListener('click', () => switchDetailTab('inspection'));
      if (maintenanceContentTab) maintenanceContentTab.addEventListener('click', () => switchDetailTab('maintenance'));
      if (quotationProcessTab) quotationProcessTab.addEventListener('click', () => switchDetailTab('quotation'));
      if (invoiceTab) invoiceTab.addEventListener('click', () => switchDetailTab('invoice'));
    }

    const MAIN_STEPS = ['已完成報修', '已安排物流收貨', '檢測中', '報價', '議價'];
    const BRANCH_CHOICES = ['購買新品', '報廢', '維修中'];
    const DELIVERY_STEP = '送貨';
    const FINAL_STEP = '產品送回';
    const CLOSE_STEP = '結案';

    function generateStatusProgress(repairStatusCode) {
      const current = statusMap[repairStatusCode];
    
      const inMainIdx   = MAIN_STEPS.indexOf(current);
      const inBranchIdx = BRANCH_CHOICES.indexOf(current);
      const inFinal     = (repairStatusCode === "9");
      const inDelivery  = (repairStatusCode === "10");
      const inClose     = (repairStatusCode === "11");
    
      // 主線進度邏輯：若不在主線，主線全視為完成
      const mainCompleted = (inBranchIdx >= 0 || inDelivery || inFinal || inClose);
      const mainActiveIdx = MAIN_STEPS.indexOf(current);
    
      // === 上排（主線 1~5） ===
      let mainHTML = '<div class="track main">';
      MAIN_STEPS.forEach((step, i) => {
        let cls = 'node';
        if (mainCompleted) cls += ' completed';
        else if (mainActiveIdx > i && mainActiveIdx >= 0) cls += ' completed';
        else if (mainActiveIdx === i) cls += ' active';
        mainHTML += `<div class="${cls}"><div class="dot">${i+1}</div><div class="label">${step}</div></div>`;
      });
      mainHTML += '</div>';
    
      // === 中排（分支，數字固定 6） ===
      let branchHTML = '<div class="track branch">';
      BRANCH_CHOICES.forEach((step, i) => {
        let cls = 'node';
        if (inBranchIdx === i) cls += ' active';
        if ((inDelivery && step === '購買新品') ||
          (inFinal && step === '維修中') ||
          (inClose && (step === '購買新品' || step === '維修中' || step === '報廢'))) cls += ' completed'; 
        branchHTML += `<div class="${cls}"><div class="dot">6</div><div class="label">${step}</div></div>`;
      });
      branchHTML += '</div>';
    
      // 下排：數字 7，送貨在「購買新品」下方，產品送回在「維修中」下方，報廢下方空白
      let finalHTML = '<div class="track final">';
      let deliveryCls = 'node';
      if (inDelivery) deliveryCls += ' active';
      if (inClose) deliveryCls += ' completed';
      finalHTML += `<div class="${deliveryCls}"><div class="dot">7</div><div class="label">${DELIVERY_STEP}</div></div>`;
      // 空白節點（在第二欄，報廢下方）
      finalHTML += `<div class="node spacer"></div>`;
      // 產品送回節點（在第三欄，維修中下方）
      let finalCls = 'node is-final';
      if (inFinal) finalCls += ' active';
      if (inClose) finalCls += ' completed';
      finalHTML += `<div class="${finalCls}"><div class="dot">7</div><div class="label">${FINAL_STEP}</div></div>`;
      finalHTML += '</div>';

      // 第四排：數字 8，結案 - 只顯示一個在中間
      let closeHTML = '<div class="track close">';
      closeHTML += `<div class="node spacer"></div>`;
      let closeCls = 'node is-final';
      if (inClose) closeCls += ' active';
      closeHTML += `<div class="${closeCls}"><div class="dot">8</div><div class="label">${CLOSE_STEP}</div></div>`;
      closeHTML += `<div class="node spacer"></div>`;
      closeHTML += '</div>';
      
      return `<div class="three-track-progress">${mainHTML}<div class="branch-connector"></div>${branchHTML}${finalHTML}<div class="final-to-close-connector"></div>${closeHTML}</div>`;
    }

    // (*** 替換 ***) 模擬載入檔案預覽
    // 這個函數不再真的去 Google Drive 抓檔案，只是顯示假的外觀
    async function loadFilePreview(fileId, section) {
      if (!fileId) return;

      const resultDiv = section.querySelector('.fileResult');
      const fileName = `${fileId}.pdf`; // 模擬顯示檔名，可依實際需求改副檔名

      // 只顯示超連結名稱
      resultDiv.innerHTML = `
         <a href="#" 
              onclick="alert('純前端展示模式，模擬下載：${fileName}'); return false;" 
              style="color: #f3d28c; font-weight: bold; text-decoration: underline;">
              ${fileName}
            </a>
      `;
    }

    /* === 載入所有檔案預覽 (主函數不變) === */
    async function loadAllDetailFiles(record) {
      const partsSection = document.getElementById('parts-section');
      if (partsSection && record.Parts_Desc) {
        partsSection.querySelector('.fileIdInput').value = record.Parts_Desc;
        await loadFilePreview(record.Parts_Desc, partsSection);
      }
      const inspectionSection = document.getElementById('inspection-content-section');
      const inspectionFileId = record.Inspection_Desc || '';
      if (inspectionSection && inspectionFileId) {
          await loadFilePreview(inspectionFileId, inspectionSection);
      }
      const maintenanceSection = document.getElementById('maintenance-content-section');
      const maintenanceFileId = record.Maintenance_Desc || '';
      if (maintenanceSection && maintenanceFileId) {
          await loadFilePreview(maintenanceFileId, maintenanceSection);
      }
      
      const invoiceFileSection = document.getElementById('invoiceFileSection');
      if (invoiceFileSection && record.Invoice_Desc) {
          invoiceFileSection.querySelector('.fileIdInput').value = record.Invoice_Desc;
          await loadFilePreview(record.Invoice_Desc, invoiceFileSection);
      }
      
      const feesFileSection = document.getElementById('feesFileSection');
      const feesFileId = record.Fees_Desc || '';
      if (feesFileSection && feesFileId) {
          feesFileSection.querySelector('.fileIdInput').value = feesFileId;
          await loadFilePreview(feesFileId, feesFileSection);
      }
    }
    
  </script>
  
  <script src="logout.js"></script>
  
  <script>
    const toggleButton = document.getElementById('menu-toggle');
    const dropdown = document.getElementById('mobile-dropdown');
    const overlay1 = document.getElementById('overlay1');

    toggleButton.addEventListener('click', () => {
      dropdown.classList.toggle('active'); // 切換右側選單
      overlay1.classList.toggle('active');
    });

    overlay1.addEventListener('click', (event) => {
      // 只有點擊到 overlay 背景（而非選單本身）才觸發關閉
      if (event.target === overlay1) {
        dropdown.classList.remove('active');
        overlay1.classList.remove('active');
      }
    });
  </script>
  
  <script src="welcome-username.js"></script>
</body>
</html>